<!DOCTYPE html>
<html>
<title>浙江大学通行码</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link rel="stylesheet" href="./css/zju_code.css">
<script src="./js/jquery.js"></script>
<script>
    alert('点击姓名更改姓名, 查询记录更换颜色')
    jQuery(function () {
        sy()
    })
    cnt = 0
    function sy() {
        nowtime = new Date();
        year = nowtime.getFullYear(); //年
        month = nowtime.getMonth() + 1; //月
        d = new Date(year, month, 0);
        days = d.getDate();
        day = nowtime.getDate(); //日
        hour = nowtime.getHours(); //时
        minutes = nowtime.getMinutes(); //分
        seconds = nowtime.getSeconds(); //秒
        $("#dateTime").append('<div class="time">同步时间：' + p(year) + '-' + p(month) + "-" + p(day) + ' '+ p(hour) + ":" + p(minutes) + ":" + p(seconds));
        $("#valid").append('<div class="time">有效期：'+ p(year) + '-' + p(month) + "-01 - " + p(year) + '-' + p(month) + "-" + p(days) + '</div>');
    }

    if (true) {
        //获取系统时间
        function showTime() {
            nowtime = new Date();
            year = nowtime.getFullYear(); //年
            month = nowtime.getMonth() + 1; //月
            day = nowtime.getDate(); //日
            hour = nowtime.getHours(); //时
            minutes = nowtime.getMinutes(); //分
            seconds = nowtime.getSeconds(); //秒
            //文字增加空格
            document.getElementById("div_timer").style = "white-space:pre;";
            //显示时间
            document.getElementById("div_timer").innerText = p(month) + "月" + p(day) + "日 " + p(hour) + ":" + p(minutes) + ":" + p(seconds);
        }
        setInterval("showTime()", 1000);
        //月日时分秒小于10补0
        function p(s) {
            return s < 10 ? '0' + s : s;
        }
    }

    function changename() {
        var userName=window.prompt("请输入你的名字以更改健康码");
        if(userName!=''){
            $('#name').html(userName + '的通行码')
        }
    }
    
    function changepic() {
        $('#pic').attr('src','./images/code'+cnt%2+'.png');
        cnt = cnt+1;
    }

    function gotoHealthCode(){
        window.location.href="alipays://platformapi/startapp?url=https%3A%2F%2Fh5.dingtalk.com%2FhealthAct%2Findex.html&appId=20000067";
    }
</script>
</head>

<body class="blue-bg" onload="changename()">
    <div class="banner"><img src="./images/text.png"></div>
    <div class="content-box">
        <div class="top-title">
            <h3 id="name" onclick="changename()">刘醒的通行码</h3>
            <span class="bgr-blue">本科生</span>
        </div>
        <strong>
            <div class="time2" id="div_timer" style="white-space: pre;">00月00日 00:00:00</div>
        </strong>
        <div class="qr" style="text-align: center;">
            <div id="output" style="margin-top: 10px;margin-bottom: 10px" onclick="changepic()">
                <img id='pic' src="./images/code1.png" width="180" height="180" >
            </div>
        </div>
        <div class="time" id='valid'></div>
        <div id="hzjkm">
            <div class="hz" style="color: #3c72e7;font-family: Microsoft YaHei;">健康码获取失败（请打开支付宝出示）</div>
        </div>
        <div style="background-color: #7aa0f1;margin-top:10px;margin-left: 20%;margin-right: 20%; padding: 1%; text-align: center;color: white; border-radius: 5px;" onclick="gotoHealthCode()">查询新冠疫苗接种记录</div>
        <div id="dateTime">
            <div class="time"></div>
        </div>
        <p class="tip" style="margin-top: 10px;">凭蓝码可在浙江大学校园内通行<br>请主动出示，配合检查</p>
        <div style="text-align:center; margin-top: 10px">
            <a href="#" onclick="changename();return false;">办事大厅</a>&nbsp;&nbsp;&nbsp;
            <a href="#" onclick="changepic();return false;">查看申请记录</a>&nbsp;&nbsp;&nbsp;
        </div>
    </div>
    <div class="bottom-tip">
        <h3>安 保 处 ：0571-88206110</h3>
        <a href="http://xwfw.zju.edu.cn/mobile/redir.php?catalog_id=371039" target="_blank" class="link-btn">常见问题</a>
        <h3>技术支持：0571-87951669</h3>
    </div>
</body>

</html>
